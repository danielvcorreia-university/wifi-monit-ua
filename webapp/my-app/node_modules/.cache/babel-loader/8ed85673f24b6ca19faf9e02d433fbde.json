{"ast":null,"code":"import _slicedToArray from\"/home/andralves/Documents/PEI/proj/wifi-monit-ua/webapp/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import ReactMapGL,{NavigationControl,Marker,Source,Layer,Popup}from\"react-map-gl\";import{Button,IconButton}from'@material-ui/core';import{Link}from\"react-router-dom\";import depGeoJSON from\"../JSON/depsGeoJSON.geojson\";import depLoc from\"../JSON/depLoc.json\";import ApartmentIcon from'@material-ui/icons/Apartment';export default function Map(){var _useState=useState({latitude:40.629620,longitude:-8.657000,zoom:16,width:\"99vw\",height:\"92vh\",bearing:275}),_useState2=_slicedToArray(_useState,2),viewport=_useState2[0],setViewport=_useState2[1];var settings={minZoom:16};var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectDep=_useState4[0],setSelectDep=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),highlight=_useState6[0],setHighlight=_useState6[1];var depLayer={/* Department inactive background layer */id:'dep',type:'fill',paint:{'fill-outline-color':'#000000','fill-color':'#000000'}};var highlightLayer={/* Department highlighted layer */id:'depHighlight',type:'fill',paint:{'fill-outline-color':'#484896','fill-color':'#6e599f','fill-opacity':0.75}};var geojson={type:'Feature',geometry:{\"type\":\"Polygon\",\"coordinates\":[[[40.632714,-8.659114],[40.632730,-8.659340],[40.633096,-8.659353],[40.633102,-8.659670],[40.633517,-8.659678],[40.633519,-8.659490],[40.633252,-8.659487],[40.633248,-8.659128],[40.632714,-8.659114]]]}};return/*#__PURE__*/React.createElement(ReactMapGL,Object.assign({},viewport,settings,{mapboxApiAccessToken:process.env.REACT_APP_MAPBOX_TOKEN,onViewportChange:function onViewportChange(viewport){setViewport(viewport);}}),/*#__PURE__*/React.createElement(\"div\",{style:{position:'absolute',right:0}},/*#__PURE__*/React.createElement(NavigationControl,null)),depLoc.departments.map(function(department){return/*#__PURE__*/React.createElement(Marker,{key:department.DEP_NUMBER,latitude:department.coordinates[0],longitude:department.coordinates[1]},/*#__PURE__*/React.createElement(Link,{to:{pathname:'/department',state:{depNum:department.DEP_NUMBER}}},/*#__PURE__*/React.createElement(IconButton,{color:\"primary\",\"aria-label\":\"dep\",size:\"small\",onMouseEnter:function onMouseEnter(){setHighlight(true);setSelectDep(department);},onMouseLeave:function onMouseLeave(){return setHighlight(false);}},/*#__PURE__*/React.createElement(ApartmentIcon,null))));}),highlight&&/*#__PURE__*/React.createElement(Popup,{latitude:selectDep.coordinates[0],longitude:selectDep.coordinates[1]},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,selectDep.DEP_NUMBER,\" - \",selectDep.DEP_NOME))));}","map":{"version":3,"sources":["/home/andralves/Documents/PEI/proj/wifi-monit-ua/webapp/my-app/src/components/Map.js"],"names":["React","useState","useEffect","ReactMapGL","NavigationControl","Marker","Source","Layer","Popup","Button","IconButton","Link","depGeoJSON","depLoc","ApartmentIcon","Map","latitude","longitude","zoom","width","height","bearing","viewport","setViewport","settings","minZoom","selectDep","setSelectDep","highlight","setHighlight","depLayer","id","type","paint","highlightLayer","geojson","geometry","process","env","REACT_APP_MAPBOX_TOKEN","position","right","departments","map","department","DEP_NUMBER","coordinates","pathname","state","depNum","DEP_NOME"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactMapGL, {NavigationControl, Marker, Source, Layer, Popup} from \"react-map-gl\";\nimport { Button, IconButton } from '@material-ui/core';\nimport { Link } from \"react-router-dom\";\nimport depGeoJSON from \"../JSON/depsGeoJSON.geojson\";\nimport depLoc from \"../JSON/depLoc.json\";\nimport ApartmentIcon from '@material-ui/icons/Apartment';\n\nexport default function Map() {\n  const [viewport, setViewport] = useState({\n    latitude: 40.629620,\n    longitude: -8.657000,\n    zoom: 16,\n    width: \"99vw\",\n    height: \"92vh\",\n    bearing: 275\n  });\n  \n  const settings = {\n    minZoom: 16\n  }\n\n  const [selectDep, setSelectDep] = useState(null);\n  const [highlight, setHighlight] = useState(false);\n  \n  const depLayer = {            /* Department inactive background layer */ \n    id: 'dep',\n    type: 'fill',\n    paint: {\n      'fill-outline-color': '#000000',\n      'fill-color': '#000000'\n    }\n  };\n\n  const highlightLayer = {      /* Department highlighted layer */\n    id: 'depHighlight',\n    type: 'fill',\n    paint: {\n      'fill-outline-color': '#484896',\n      'fill-color': '#6e599f',\n      'fill-opacity': 0.75\n    }\n  };\n\n  const geojson = {\n    type: 'Feature', \n    geometry: {\"type\": \"Polygon\",\n      \"coordinates\": [\n        [\n          [40.632714, -8.659114], [40.632730, -8.659340], [40.633096, -8.659353],\n          [40.633102, -8.659670], [40.633517, -8.659678], [40.633519, -8.659490],\n          [40.633252, -8.659487], [40.633248, -8.659128], [40.632714, -8.659114]\n        ]\n      ]\n    }\n  };\n\n  return (\n    <ReactMapGL\n      {...viewport}\n      {...settings}\n      mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_TOKEN}\n      onViewportChange={viewport => {setViewport(viewport)}}\n    >\n    {/*    Layers de destaque dos departamentos não tão a funcionar por alguma razão  \n      <Source id=\"dep\" type=\"geojson\" data={geojson}>\n          <Layer id=\"depHighlight\"{...highlightLayer} />\n      </Source>\n    */}\n      <div style={{position: 'absolute', right: 0}}>\n          <NavigationControl />\n      </div>\n\n      {depLoc.departments.map(department => (\n        <Marker key={department.DEP_NUMBER} latitude={department.coordinates[0]} longitude={department.coordinates[1]}>\n          <Link to={{\n                    pathname:'/department',\n                    state:{\n                        depNum: department.DEP_NUMBER\n                    }\n                  }}>\n            <IconButton color=\"primary\" aria-label=\"dep\" size=\"small\" onMouseEnter={() => {setHighlight(true); setSelectDep(department)}} onMouseLeave={() => setHighlight(false)}>\n              <ApartmentIcon />\n            </IconButton>\n          </Link>\n        </Marker>\n      ))}\n      {highlight && (\n        <Popup latitude={selectDep.coordinates[0]} longitude={selectDep.coordinates[1]}>\n          <div>\n            <h1>{selectDep.DEP_NUMBER} - {selectDep.DEP_NOME}</h1>\n          </div>\n        </Popup>\n      )}\n      \n      {/*<Marker\n        key={1}\n        latitude={40.633213}\n        longitude={-8.659457}\n      >\n        \n        <Link to={{\n                    pathname:'/department',\n                    state:{\n                        depNum: 4\n                    }\n                  }}>\n          <Button variant=\"contained\" color=\"primary\" size=\"small\">\n            DETI\n          </Button>\n        </Link>\n      </Marker> */}\n    </ReactMapGL>\n  );\n}"]},"metadata":{},"sourceType":"module"}